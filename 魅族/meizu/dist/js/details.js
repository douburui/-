define(['jqurey', 'jqcookie'], function (jqurey, jqcookie) {
    function details(){
        $('.details-heart').on('mouseenter','#small',function(){
            $("#mark,#big").show();
        }).on('mouseleave','#small',function(){
            $("#mark,#big").hide();
        }).on('mousemove','#small',function(ev){
            var l = ev.clientX - $(this).offset().left - 100;
            l = Math.max(0, l);
            l = Math.min(l, 360);
            var t = ev.clientY - $(this).offset().top - 100;
            t = Math.max(0, t);
            t = Math.min(t, 360);
            $("#mark").css({
                left: l,
                top: t
            })
            $("#big img").css({
                left: -2 * l,
                top: -2 * t
            })
        })
    }
    function detailsAjax(){
    $.ajax({
            url: '../json/all.json',
            success: function (arr) {
                var id = window.location.hash;
                id = id.substr(1);
                console.log(id)
                let str = ``;
                for (let i = 0; i < arr.length; i++) {
                    if(id == arr[i].id){
                        str = `<div id="small">
                        <img src="${arr[i].img}" alt="" />
                        <div id="mark"></div>
                    </div>
                    <div id="big">
                        <img src="${arr[i].img}" alt="" />
                    </div>
                    <div class="details-heart-r">
                        <div class="details-heart-r-top">
                            <h1>${arr[i].name}</h1>
                            <p>${arr[i].txt}</p>
                        </div>
                        <div class="details-heart-r-price">
                            
                            <p>${arr[i].price}</p>
                        </div>
                        <div class="support">
                            <span class="support-z">支&nbsp;&nbsp;&nbsp;持</span>
                            <span class="support-z2">
                                <i>
                                    <svg t="1602657609583" class="icon" viewBox="0 0 1025 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="1178" width="17" height="17">
                                        <path
                                            d="M511.945 958.713c-247.065 0-448.054-200.988-448.054-448.06 0-247.066 200.988-448.055 448.054-448.055 247.073 0 448.06 200.988 448.06 448.054 0 247.072-200.988 448.06-448.06 448.06z m0-831.82c-211.607 0-383.758 172.15-383.758 383.758 0 211.581 172.15 383.766 383.758 383.766 211.581 0 383.766-172.185 383.766-383.766-0.001-211.607-172.186-383.758-383.766-383.758z m0 0"
                                            p-id="1179" fill="#595959"></path>
                                        <path
                                            d="M726.948 391.825c-12.545-12.448-32.837-12.322-45.249 0.254l-233.31 235.869-103.281-106.122c-12.35-12.708-32.612-12.933-45.25-0.64-12.677 12.322-12.964 32.612-0.64 45.25L425.252 695.96c0.064 0.093 0.19 0.093 0.254 0.19 0.064 0.064 0.097 0.191 0.161 0.254 2.017 1.988 4.512 3.204 6.881 4.547 1.25 0.674 2.241 1.793 3.52 2.305a31.71 31.71 0 0 0 12.096 2.398c4.063 0 8.131-0.796 11.97-2.334 1.25-0.513 2.207-1.539 3.393-2.178 2.398-1.344 4.898-2.525 6.945-4.542 0.063-0.064 0.098-0.196 0.19-0.259 0.064-0.094 0.161-0.128 0.26-0.191l256.253-259.042c12.452-12.608 12.32-32.865-0.226-45.282z m0 0"
                                            p-id="1180" fill="#595959"></path>
                                    </svg>
                                </i>
                                <span class="installment">花呗分期</span>
                            </span>
                            <span class="support-z2">
                                <i>
                                    <svg t="1602657609583" class="icon" viewBox="0 0 1025 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="1178" width="17" height="17">
                                        <path
                                            d="M511.945 958.713c-247.065 0-448.054-200.988-448.054-448.06 0-247.066 200.988-448.055 448.054-448.055 247.073 0 448.06 200.988 448.06 448.054 0 247.072-200.988 448.06-448.06 448.06z m0-831.82c-211.607 0-383.758 172.15-383.758 383.758 0 211.581 172.15 383.766 383.758 383.766 211.581 0 383.766-172.185 383.766-383.766-0.001-211.607-172.186-383.758-383.766-383.758z m0 0"
                                            p-id="1179" fill="#595959"></path>
                                        <path
                                            d="M726.948 391.825c-12.545-12.448-32.837-12.322-45.249 0.254l-233.31 235.869-103.281-106.122c-12.35-12.708-32.612-12.933-45.25-0.64-12.677 12.322-12.964 32.612-0.64 45.25L425.252 695.96c0.064 0.093 0.19 0.093 0.254 0.19 0.064 0.064 0.097 0.191 0.161 0.254 2.017 1.988 4.512 3.204 6.881 4.547 1.25 0.674 2.241 1.793 3.52 2.305a31.71 31.71 0 0 0 12.096 2.398c4.063 0 8.131-0.796 11.97-2.334 1.25-0.513 2.207-1.539 3.393-2.178 2.398-1.344 4.898-2.525 6.945-4.542 0.063-0.064 0.098-0.196 0.19-0.259 0.064-0.094 0.161-0.128 0.26-0.191l256.253-259.042c12.452-12.608 12.32-32.865-0.226-45.282z m0 0"
                                            p-id="1180" fill="#595959"></path>
                                    </svg>
                                </i>
                                <span class="installment">顺丰发货</span>
                            </span>
                            <span class="support-z2">
                                <i>
                                    <svg t="1602657609583" class="icon" viewBox="0 0 1025 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="1178" width="17" height="17">
                                        <path
                                            d="M511.945 958.713c-247.065 0-448.054-200.988-448.054-448.06 0-247.066 200.988-448.055 448.054-448.055 247.073 0 448.06 200.988 448.06 448.054 0 247.072-200.988 448.06-448.06 448.06z m0-831.82c-211.607 0-383.758 172.15-383.758 383.758 0 211.581 172.15 383.766 383.758 383.766 211.581 0 383.766-172.185 383.766-383.766-0.001-211.607-172.186-383.758-383.766-383.758z m0 0"
                                            p-id="1179" fill="#595959"></path>
                                        <path
                                            d="M726.948 391.825c-12.545-12.448-32.837-12.322-45.249 0.254l-233.31 235.869-103.281-106.122c-12.35-12.708-32.612-12.933-45.25-0.64-12.677 12.322-12.964 32.612-0.64 45.25L425.252 695.96c0.064 0.093 0.19 0.093 0.254 0.19 0.064 0.064 0.097 0.191 0.161 0.254 2.017 1.988 4.512 3.204 6.881 4.547 1.25 0.674 2.241 1.793 3.52 2.305a31.71 31.71 0 0 0 12.096 2.398c4.063 0 8.131-0.796 11.97-2.334 1.25-0.513 2.207-1.539 3.393-2.178 2.398-1.344 4.898-2.525 6.945-4.542 0.063-0.064 0.098-0.196 0.19-0.259 0.064-0.094 0.161-0.128 0.26-0.191l256.253-259.042c12.452-12.608 12.32-32.865-0.226-45.282z m0 0"
                                            p-id="1180" fill="#595959"></path>
                                    </svg>
                                </i>
                                <span class="installment">7天无理由退货</span>
                            </span>
                            <p class="delivery">
                                配送服务
                                <span>本商品由 魅族 负责发货并提供售后服务</span>
                            </p>
                        </div>
                        <a href="">
                            <div class="parameter">
                                <span>加入购物车</span>
                            </div>
                        </a>
                    </div>`
                    $('.details-heart').prepend(str);
                    }
                }
            },
            error: function (msg) {
                console.log(msg)
            }
        })
    }
    return {
        details,
        detailsAjax
    }
})